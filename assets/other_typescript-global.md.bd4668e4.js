import{o as n,c as s,a}from"./app.1e087f38.js";const t='{"title":"TS扩展全局变量类型推导","description":"","frontmatter":{},"headers":[{"level":2,"title":"noImplicitAny","slug":"noimplicitany"},{"level":2,"title":"References","slug":"references"}],"relativePath":"other/typescript-global.md","lastUpdated":1630314544007}',o={},p=a('<h1 id="ts扩展全局变量类型推导"><a class="header-anchor" href="#ts扩展全局变量类型推导" aria-hidden="true">#</a> TS扩展全局变量类型推导</h1><p>配置文件</p><p>tsconfig.json</p><div class="language-js"><pre><code><span class="token punctuation">{</span>\n  <span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ↓指定ECMAScript目标版本，esnext为最新版本</span>\n    <span class="token string">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓指定生成哪个模块系统代码，esnext为最新版本</span>\n    <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓决定如何处理模块。</span>\n    <span class="token string">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓启用所有严格类型检查选项。</span>\n    <span class="token string">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓禁止对同一个文件的不一致的引用。</span>\n    <span class="token string">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓允许从没有设置默认导出的模块中默认导入。这并不影响代码的输出，仅为了类型检查。</span>\n    <span class="token string">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓禁用函数参数双向协变检查。</span>\n    <span class="token string">&quot;strictFunctionTypes&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓在 .tsx文件里支持JSX</span>\n    <span class="token string">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓解析非相对模块名的基准目录。查看 模块解析文档了解详情。</span>\n    <span class="token string">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓允许编译javascript文件。</span>\n    <span class="token string">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓生成相应的 .map文件。</span>\n    <span class="token string">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓若有未使用的局部变量则抛错。</span>\n    <span class="token string">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓若有未使用的参数则抛错。</span>\n    <span class="token string">&quot;noUnusedParameters&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓启用实验性的ES装饰器。</span>\n    <span class="token string">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓编译过程中需要引入的库文件的列表。</span>\n    <span class="token string">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓要包含的类型声明文件名列表。</span>\n    <span class="token string">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;vite/client&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓要包含的类型声明文件路径列表。</span>\n    <span class="token string">&quot;typeRoots&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./node_modules/@types/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./types&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;incremental&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓在表达式和声明上有隐含的 any类型时报错。</span>\n    <span class="token string">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓忽略所有的声明文件（ *.d.ts）的类型检查。</span>\n    <span class="token string">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token comment">// ↓模块名到基于 baseUrl的路径映射的列表。查看 模块解析文档了解详情。</span>\n    <span class="token string">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">&quot;/@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token string">&quot;/#/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;types/*&quot;</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token comment">// ↓指定一个匹配列表（属于自动指定该路径下的所有ts相关文件）</span>\n  <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;types/**/*.d.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;types/**/*.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;mock/**/*.ts&quot;</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token comment">// 指定一个排除列表（include的反向操作）</span>\n  <span class="token string">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.js&quot;</span><span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n\n</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>declare問題 修改 tsconfig.json</p></div><p>types\\global.d.ts <code>declare</code></p><blockquote><p>A &#39;declare&#39; modifier cannot be used in an already ambient context.ts(1038)</p></blockquote><p>这里的意思是我们在一个已经存在的模块中使用了declare，因为global作用域作用在全局，应该是一个内置的模块</p><p>tsconfig.json文件配置<code>skipLibCheck: true</code> <a href="https://www.typescriptlang.org/tsconfig#skipLibCheck" target="_blank" rel="noopener noreferrer">skipLibCheck链接</a>（vben中采用的方式）</p><p>tsconfig.json</p><div class="language-js"><pre><code><span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p>include中加入我们对全局可以引用的文件</p><div class="language-js"><pre><code>  <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token operator">...</span>\n    <span class="token string">&quot;types/**/*.d.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;types/**/*.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;vite.config.ts&quot;</span>\n  <span class="token punctuation">]</span>\n</code></pre></div><p>skipLibCheck的实际作用：启用它会阻止Typescript对整个导入的库进行类型检查。 相反，Typescript只会针对这些类型对您使用的代码进行类型检查。 skipLibCheck会降低类型检查的能力，理想情况下我们不会使用它。但是并不是每个库都提供完美的类型，因此跳过它可能会很好。</p><p>build\\generate\\generateModifyVars.ts</p><blockquote><p>Could not find a declaration file for module &#39;ant-design-vue/dist/theme&#39;</p></blockquote><div class="language-js"><pre><code>  <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token operator">...</span>\n    <span class="token string">&quot;build/**/*.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;build/**/*.d.ts&quot;</span><span class="token punctuation">,</span>\n    <span class="token string">&quot;vite.config.ts&quot;</span>\n  <span class="token punctuation">]</span>\n</code></pre></div><h2 id="noimplicitany"><a class="header-anchor" href="#noimplicitany" aria-hidden="true">#</a> noImplicitAny</h2><p>tsconfig.json</p><div class="language-js"><pre><code><span class="token string">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n</code></pre></div><p>noImplicitAny意思是是否不允許typescript編譯時隱性將沒有設定類型的變數設定為any。如果設定為true的話，如果typescript裡面有沒有設定類型的變數則會產生錯誤訊息</p><h2 id="references"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h2><p><a href="https://sunboyzgz.github.io/2021/05/20/typescript-global/" target="_blank" rel="noopener noreferrer">TS扩展全局变量类型推导</a></p>',23);o.render=function(a,t,o,e,c,u){return n(),s("div",null,[p])};export default o;export{t as __pageData};
